trigger:
  - master

pr:
  - master

pool:
  vmImage: "ubuntu-latest"

container: tensorflow/tensorflow:custom-op-ubuntu16

steps:
  - script: pip install tensorflow==1.14.0 --user
    displayName: "Install TensorFlow"
  - script: make compute_engine_pip_pkg
    displayName: "Build PIP Package"
  - script: pip install artifacts/*.whl --user
    displayName: "Install PIP Package"
  - script: make compute_engine_test
    displayName: "Run unit tests"
