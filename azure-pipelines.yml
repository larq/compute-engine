trigger:
  - master

pr:
  - master

pool:
  vmImage: "ubuntu-latest"

container: tensorflow/tensorflow:custom-op-ubuntu16

steps:
  - script: pip3 install tensorflow==1.14.0 pytest --user
    displayName: "Install Dependencies"
  - script: make compute_engine_pip_pkg
    displayName: "Build PIP Package"
  - script: pip3 install artifacts/*.whl --user
    displayName: "Install PIP Package"
  - script: python3 -m pytest .
    displayName: "Run unit tests"
